(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CreateArticle"],{"2f5a":function(t,e,i){"use strict";var r=i("ee8f"),n=i.n(r);n.a},"2fdb":function(t,e,i){"use strict";var r=i("5ca1"),n=i("d2c8"),a="includes";r(r.P+r.F*i("5147")(a),"String",{includes:function(t){return!!~n(this,t,a).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"401e":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.loading?i("p",[t._v("Loading...")]):t._e(),!t.loading&&t.error?i("p",{staticClass:"c-r"},[t._v(t._s(t.error))]):t._e(),t.error||t.loading?t._e():i("form",{staticClass:" form ",attrs:{method:"POST",enctype:"multipart/form-data"}},[i("div",{staticClass:"content"},[i("router-link",{staticClass:"back_btn",attrs:{to:{name:"admin_articles"}}},[i("left-arrow-icon"),t._v("\n\n        Articles")],1),t.edit?t._e():i("h2",[t._v("Create Article")]),t.edit?i("h2",[t._v("Edit Article")]):t._e(),i("div",{staticClass:"p-medium"},[i("div",{staticClass:"form-control"},[i("label",{attrs:{for:"name"}},[t._v("Title")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],attrs:{type:"text",name:"title",id:"name"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}})]),i("div",{staticClass:"form-control"},[i("label",{attrs:{for:"site_description"}},[t._v("Site Description")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.site_description,expression:"form.site_description"}],attrs:{type:"text",name:"site_description",id:"site_description"},domProps:{value:t.form.site_description},on:{input:function(e){e.target.composing||t.$set(t.form,"site_description",e.target.value)}}})]),i("div",{staticClass:"form-control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.active,expression:"form.active"}],attrs:{type:"checkbox",name:"active",id:"active"},domProps:{checked:Array.isArray(t.form.active)?t._i(t.form.active,null)>-1:t.form.active},on:{change:function(e){var i=t.form.active,r=e.target,n=!!r.checked;if(Array.isArray(i)){var a=null,o=t._i(i,a);r.checked?o<0&&t.$set(t.form,"active",i.concat([a])):o>-1&&t.$set(t.form,"active",i.slice(0,o).concat(i.slice(o+1)))}else t.$set(t.form,"active",n)}}}),i("label",{attrs:{for:"active"}},[t._v(t._s(t.form.active?"Active":"Not Active"))])]),i("div",{staticClass:"form-control"},[i("label",{attrs:{for:"image"}},[t._v("image")]),i("input",{attrs:{type:"file",name:"image",id:"itemImg"},on:{change:t.previewFiles}})]),i("div",{staticClass:"form-control grid"},[i("label",{attrs:{for:"category"}},[t._v("category")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.category,expression:"form.category"}],attrs:{name:"category",id:"category"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"category",e.target.multiple?i:i[0])}}},t._l(t.categories,function(e){return i("option",{key:e.name,staticClass:"options",attrs:{"data-val":e.name},domProps:{value:e.name}},[t._v("\n              "+t._s(e.name)+"\n            ")])}),0)]),i("div",{staticClass:"form-control grid"},[i("label",{attrs:{for:"location"}},[t._v("location")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.location,expression:"form.location"}],attrs:{name:"location",id:"location"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"location",e.target.multiple?i:i[0])}}},[i("option",{staticClass:"options",attrs:{value:"all"}},[t._v("All")]),i("option",{staticClass:"options",attrs:{value:"blog"}},[t._v("Blog")]),i("option",{staticClass:"options",attrs:{value:"portfolio"}},[t._v("Portfolio")])])]),i("div",{staticClass:"form-input"},[i("label",{attrs:{for:"tags"}},[t._v("Article Tags:")]),i("input",{staticClass:"currentInput input",attrs:{id:"tags",type:"text",placeholder:"Type Tags Then Press Enter"},on:{keyup:function(e){return t.getTag(e)}}}),i("div",{staticClass:"tags flex"},t._l(t.form.tags,function(e){return i("li",{key:e,staticClass:"options btn btn-info tag-span",attrs:{"data-val":e}},[t._v("\n              "+t._s(e)+"\n              "),i("i",{staticClass:"fas fa-times",on:{click:function(i){return t.removetag(e)}}})])}),0)])]),i("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},ready:function(e){return t.onEditorReady(e)}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),i("input",{staticClass:"none",attrs:{type:"file",id:"getFile"},on:{change:function(e){return t.uploadImage(e)}}}),t.edit?t._e():i("button",{staticClass:"btn btn-success",attrs:{id:"addNewitem",type:"button"},on:{click:function(e){return e.preventDefault(),t.createArticle()}}},[t._v("\n        Save\n      ")]),t.edit?i("button",{staticClass:"btn btn-success",attrs:{id:"addNewitem",type:"button"},on:{click:function(e){return e.preventDefault(),t.createArticle()}}},[t._v("\n        Update\n      ")]):t._e()],1)])])},n=[],a=i("f499"),o=i.n(a),s=(i("6762"),i("2fdb"),i("7f7f"),i("96cf"),i("3b8d")),c=i("cebc"),l=i("2f62"),u=i("1487"),d=i.n(u),m=i("953d"),f=i("e2d5"),p={name:"createarticle",data:function(){return{edit:!1,error:"",loading:!1,form:{active:!0,title:null,category:"",image:"",location:null,site_description:"",tags:[],content:"<p>example content</p>"},editorOption:{modules:{syntax:{highlight:function(t){return d.a.highlightAuto(t).value}},toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","emoji"]],handlers:{image:function(){document.getElementById("getFile").click()}}}}}}},components:{LeftArrowIcon:f["a"],quillEditor:m["quillEditor"]},computed:Object(c["a"])({},Object(l["e"])(["categories","url"]),Object(l["e"])("admin",["allarticles"]),Object(l["c"])("admin",["articleById"]),Object(l["d"])(["msg"])),created:function(){var t=this.$route.params.id;t&&this.startEditing(t)},methods:{onEditorBlur:function(t){return t},onEditorFocus:function(t){return t},onEditorReady:function(t){return t},onEditorChange:function(t){var e=t.quill,i=t.html,r=t.text;return{text:r,html:i,quill:e}},startEditing:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.edit=!0,this.loading=!0,0!=this.allarticles.length){t.next=5;break}return t.next=5,this.$store.dispatch("admin/getArticles");case 5:i=this.articleById(e),this.loading=!1,i||(this.error="Cannot find article"),this.form.title=i.title,this.form.active=i.active,this.form.location=i.location||"all",this.form.tags=i.tags,this.form.site_description=i.site_description,this.form.category=i.category.name,this.form.content=i.content;case 15:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),uploadImage:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var i,r,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.selectedFile=e.target.files[0],i=new FormData,i.append("image",this.selectedFile),i.append("name",this.selectedFile.name),t.next=6,fetch("".concat(this.url,"/admin/media"),{method:"Post",body:i});case 6:return r=t.sent,t.next=9,r.json();case 9:n=t.sent,200!==r.status&&201!==r.status||(a=this.$refs.myQuillEditor.quill.getSelection(),this.$refs.myQuillEditor.quill.insertEmbed(a.index,"image","".concat(this.url).concat(n)));case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getTag:function(t){var e=t.keyCode||t.which;if(13===e){var i=t.target.value.toLowerCase();""!=i&&(this.form.tags.includes(i)||this.form.tags.push(i),t.target.value="")}},removetag:function(t){this.form.tags=this.form.tags.filter(function(e){return e!=t})},previewFiles:function(t){var e=t.target.files[0],i=["image/jpg","image/jpeg","image/png"],r=e["type"];return i.includes(r)?this.form.image=e:""},createArticle:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=new FormData,e.append("content",this.form.content),e.append("active",this.form.active),e.append("tags",o()(this.form.tags)),e.append("title",this.form.title),e.append("location",this.form.location),e.append("category",this.form.category),e.append("site_description",this.form.site_description),e.append("image",this.form.image),this.edit){t.next=13;break}return t.next=12,this.$store.dispatch({type:"admin/addArticle",data:e});case 12:return t.abrupt("return",t.sent);case 13:return i=this.$route.params.id,t.next=16,this.$store.dispatch({type:"admin/editArticle",data:e,id:i});case 16:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},watch:{"$route.params.id":function(){this.startEditing()}}},g=p,v=(i("2f5a"),i("2877")),h=Object(v["a"])(g,r,n,!1,null,"7f0f2dec",null);e["default"]=h.exports},5147:function(t,e,i){var r=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[r]=!1,!"/./"[t](e)}catch(n){}}return!0}},6762:function(t,e,i){"use strict";var r=i("5ca1"),n=i("c366")(!0);r(r.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},aae3:function(t,e,i){var r=i("d3f4"),n=i("2d95"),a=i("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==n(t))}},d2c8:function(t,e,i){var r=i("aae3"),n=i("be13");t.exports=function(t,e,i){if(r(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(n(t))}},e2d5:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticStyle:{"enable-background":"new 0 0 490 490"},attrs:{height:t.height?t.height:12,width:t.width?t.width:12,version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 490 490","xml:space":"preserve"}},[i("path",{attrs:{d:"M413.476,398.302L258.215,245L413.476,91.69L324.619,0L76.524,245l248.094,245L413.476,398.302z M120.086,245L324.14,43.502\n\tl46.252,47.71L214.653,245l155.739,153.781l-46.252,47.717L120.086,245z"}}),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g")])},n=[],a=i("2b0e"),o=a["a"].extend({props:["width","height"]}),s=o,c=i("2877"),l=Object(c["a"])(s,r,n,!1,null,null,null);e["a"]=l.exports},ee8f:function(t,e,i){}}]);
//# sourceMappingURL=CreateArticle.b1a1275c.js.map